(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{148:function(t,e,i){"use strict";i.r(e);var s={components:{},mixins:[],data:function(){return{isLoading:!1,bulkAction:"",customChildControl:"display-none",customEditChildControl:"display-none",customChildList:[],customEditChildList:[],perPage:10,activePagination:"",totalResults:this.permissions.total,searchBox:"",currentPage:this.permissions.current_page,orderBy:"Newest",from:this.permissions.from,to:this.permissions.to,previous_page_url:this.permissions.prev_page_url,next_page_url:this.permissions.next_page_url,last_page:this.permissions.last_page,checkedValues:[],multipleSelect:!1,ptid:1,permissionOutput:this.permissions,permissionForm:{name:"",type:"",custom:"",customs:[]},permissionFormError:{name:"",type:"",custom:""},permissionEditForm:{name:"",id:"",type:"",custom:"",customs:[]},permissionEditFormError:{name:"",type:"",custom:""}}},props:{roles:Object},computed:{},created:function(){},mounted:function(){},methods:{addPermission:function(){var t=this;if(""===this.permissionForm.name||""===this.permissionForm.type)""===this.permissionForm.name?this.permissionFormError.name="Name field required":this.permissionFormError.name="",""===this.permissionForm.type?this.permissionFormError.type="Select a type":this.permissionFormError.type="";else{if("custom"===this.permissionForm.type&&this.customChildList.length<1)return this.permissionFormError.custom="Add child permissions first";"custom"===this.permissionForm.type&&this.customChildList.length>0&&(this.permissionForm.customs=this.customChildList),this.permissionFormError.name="",this.permissionFormError.type="",this.permissionFormError.custom="",this.$inertia.post("/admins/admin-permission",this.permissionForm).then((function(){t.permissionForm.name="",t.permissionForm.type="",t.permissionForm.custom="",t.customChildControl="display-none",t.customChildList=[],t.dataTable()}))}},deletePermission:function(t){var e=this;this.$confirm("Are you sure to delete the permission?","Warning","warning").then((function(){e.$inertia.delete("/admins/admin-permission/"+t,{replace:!1,preserveState:!0,preserveScroll:!0,only:[]}).then((function(){e.dataTable()}))}))},permissionPopUp:function(t){this.permissionEditForm.id=t.id,this.permissionEditForm.name=t.name,this.permissionEditForm.type=t.type,"custom"===this.permissionEditForm.type?this.customEditChildControl="":this.customEditChildControl="display-none",null!==t.custom?(console.log(t),this.customEditChildList=t.custom.split(", ")):this.customEditChildList=[]},permissionEditSubmit:function(){var t=this;if(""===this.permissionEditForm.name||""===this.permissionEditForm.type)""===this.permissionEditForm.name?this.permissionEditFormError.name="Name field required":this.permissionEditFormError.name="",""===this.permissionEditForm.type?this.permissionEditFormError.type="Select a type":this.permissionEditFormError.type="";else{if("custom"===this.permissionEditForm.type&&this.customEditChildList.length<1)return this.permissionEditFormError.custom="Add child permissions first";"custom"===this.permissionEditForm.type&&this.customEditChildList.length>0&&(this.permissionEditForm.customs=this.customEditChildList),this.permissionEditFormError.name="",this.permissionEditFormError.type="",this.permissionEditFormError.custom="",this.$inertia.put("/admins/admin-permission/"+this.permissionEditForm.id,this.permissionEditForm).then((function(){t.permissionEditForm.name="",t.permissionEditForm.type="",t.permissionEditForm.custom="",t.customEditChildControl="display-none",t.customEditChildList=[],$("[data-dismiss=modal]").trigger({type:"click"}),t.dataTable()}))}},setValue:function(t){this.checkedValues.push(t.id)},checkDetail:function(){this.multipleSelect?(this.checkedValues=[],this.permissionOutput.data.forEach(this.setValue)):this.checkedValues=[]},checkDetails:function(){this.multipleSelect=this.checkedValues.length===this.permissionOutput.data.length},multipleDelete:function(){var t=this;this.$confirm("Are you sure to delete the permissions?","Warning","warning").then((function(){t.checkedValues.length>0?t.$inertia.delete("/admins/admin-permission/multiple/"+t.checkedValues,{replace:!1,preserveState:!0,preserveScroll:!1,only:[]}).then((function(){t.multipleSelect=!1,t.checkedValues=[],t.dataTable()})):t.$toast.open({message:"No items selected",type:"error",position:"top-right",duration:5e3,dismissible:!0})}))},allDelete:function(){var t=this;this.$confirm("Are you sure to delete all permission?","Warning","warning").then((function(){t.$inertia.post("/admins/admin-permission/delete-all",{replace:!1,preserveState:!0,preserveScroll:!0,only:[]}).then((function(){t.dataTable()}))}))},permissionTypeTraker:function(){"custom"===this.permissionForm.type?this.customChildControl="":this.customChildControl="display-none"},permissionEditTypeTraker:function(){"custom"===this.permissionEditForm.type?this.customEditChildControl="":this.customEditChildControl="display-none"},customChildAppend:function(){""===this.permissionForm.custom?this.permissionFormError.custom="Enter child permission name":this.customChildList.includes(this.permissionForm.custom)?this.permissionFormError.custom="You have added this already":(this.permissionFormError.custom="",this.customChildList.push(this.permissionForm.custom),this.permissionForm.custom="")},removeCustom:function(t){return this.customChildList.splice(t,1)},customEditChildAppend:function(){""===this.permissionEditForm.custom?this.permissionFormError.custom="Enter child permission name":this.customEditChildList.includes(this.permissionEditForm.custom)?this.permissionEditFormError.custom="You have added this already":(this.permissionEditFormError.custom="",this.customEditChildList.push(this.permissionEditForm.custom),this.permissionEditForm.custom="")},removeEditCustom:function(t){return this.customEditChildList.splice(t,1)},trackBulkAction:function(){if("print"===this.bulkAction){var t="/admins/admin-permission/print/export",e=window.open(t,"_blank");e.focus()}else"pdf"===this.bulkAction?(t="/admins/admin-permission/pdf/export",(e=window.open(t,"_blank")).focus()):"refresh"===this.bulkAction?this.dataTable():"excel"===this.bulkAction?(t="/admins/admin-permission/excel/export",(e=window.open(t,"_blank")).focus()):"csv"===this.bulkAction?(t="/admins/admin-permission/csv/export",(e=window.open(t,"_blank")).focus()):"delete-selected"===this.bulkAction?this.multipleDelete():"delete-all"===this.bulkAction&&this.allDelete()},dataTable:function(){var t=this;this.isLoading=!0,axios.get("/admins/admin-permission/",{params:{page:this.currentPage,perPage:this.perPage,search:this.searchBox,orderBy:this.orderBy}}).then((function(e){t.permissionOutput=e.data,t.totalResults=e.data.total,t.from=e.data.from,t.to=e.data.to,t.currentPage=e.data.current_page,t.previous_page_url=e.data.prev_page_url,t.next_page_url=e.data.next_page_url,t.last_page=e.data.last_page,t.isLoading=!1})).catch((function(t){console.log(t)}))},nextPage:function(t){this.currentPage=t,this.dataTable()}}},a=i(0),r=Object(a.a)(s,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticStyle:{float:"right","margin-top":"10px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchBox,expression:"searchBox"}],staticClass:"form-control",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"search"},domProps:{value:t.searchBox},on:{input:[function(e){e.target.composing||(t.searchBox=e.target.value)},t.dataTable]}})]),t._v(" "),s("div",{staticClass:"form-group",staticStyle:{float:"right","margin-top":"10px",width:"250px",display:"flex"}},[s("label",{staticStyle:{"margin-top":"10px"},attrs:{for:"orderBy"}},[t._v("Order by")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.orderBy,expression:"orderBy"}],staticClass:"form-control",staticStyle:{width:"100px","margin-left":"5px"},attrs:{name:"result-perpage",id:"orderBy"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.orderBy=e.target.multiple?i:i[0]},t.dataTable]}},[s("option",{attrs:{value:"Newest"}},[t._v("Latest")]),t._v(" "),s("option",{attrs:{value:"Oldest"}},[t._v("Oldest")]),t._v(" "),s("option",{attrs:{value:"Name"}},[t._v("Name")])])]),t._v(" "),s("div",{staticClass:"form-group",staticStyle:{float:"right","margin-top":"10px",width:"200px"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkAction,expression:"bulkAction"}],staticClass:"form-control",staticStyle:{width:"140px","margin-left":"5px"},attrs:{name:"result-perpage",id:"bulkAction"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.bulkAction=e.target.multiple?i:i[0]},t.trackBulkAction]}},[s("option",{attrs:{value:""}},[t._v("Bulk Action")]),t._v(" "),s("option",{attrs:{value:"refresh"}},[t._v("Refresh")]),t._v(" "),s("option",{attrs:{value:"print"}},[t._v("Print")]),t._v(" "),s("option",{attrs:{value:"delete-selected"}},[t._v("Delete selected")]),t._v(" "),s("option",{attrs:{value:"delete-all"}},[t._v("Delete all")]),t._v(" "),s("option",{attrs:{value:"csv"}},[t._v("Export csv")]),t._v(" "),s("option",{attrs:{value:"excel"}},[t._v("Export excel")]),t._v(" "),s("option",{attrs:{value:"pdf"}},[t._v("Export pdf")])])]),t._v(" "),s("div",{staticClass:"form-group",staticStyle:{float:"left","margin-top":"10px",width:"250px",display:"flex"}},[s("label",{staticStyle:{"margin-top":"10px"},attrs:{for:"per-page"}},[t._v("Per page")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.perPage,expression:"perPage"}],staticClass:"form-control",staticStyle:{width:"100px","margin-left":"5px"},attrs:{name:"result-perpage",id:"per-page"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.perPage=e.target.multiple?i:i[0]},t.dataTable]}},[s("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),s("option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),s("option",{attrs:{value:"30"}},[t._v("30")]),t._v(" "),s("option",{attrs:{value:"40"}},[t._v("40")]),t._v(" "),s("option",{attrs:{value:"50"}},[t._v("50")])])])]),t._v(" "),t.isLoading?s("div",{staticStyle:{height:"40px",width:"150px",background:"white",position:"absolute",top:"30%",left:"50%","text-align":"center","padding-top":"3px","font-family":"monospace","font-size":"18px","box-shadow":"1px 1px 7px 2px #ccc"}},[t._v("Loading...")]):t._e(),t._v(" "),s("table",{staticClass:"table table-bordered table-responsive table-dark"},[s("thead",[s("tr",[s("th",{staticStyle:{width:"30px"},attrs:{scope:"col"}},[s("div",{staticClass:"checkbox checkbox-primary"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.multipleSelect,expression:"multipleSelect"}],attrs:{id:"checkbox00",type:"checkbox"},domProps:{checked:Array.isArray(t.multipleSelect)?t._i(t.multipleSelect,null)>-1:t.multipleSelect},on:{change:[function(e){var i=t.multipleSelect,s=e.target,a=!!s.checked;if(Array.isArray(i)){var r=t._i(i,null);s.checked?r<0&&(t.multipleSelect=i.concat([null])):r>-1&&(t.multipleSelect=i.slice(0,r).concat(i.slice(r+1)))}else t.multipleSelect=a},t.checkDetail]}}),t._v(" "),s("label",{attrs:{for:"checkbox00"}})])]),t._v(" "),s("th",{staticStyle:{"vertical-align":"middle"},attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),s("th",{staticStyle:{width:"100px","vertical-align":"middle"},attrs:{scope:"col"}},[t._v("Type")]),t._v(" "),s("th",{staticStyle:{width:"55px","vertical-align":"middle"},attrs:{scope:"col"}},[t._v("Action")])])]),t._v(" "),s("tbody",t._l(t.permissionOutput.data,(function(e){return s("tr",{key:e.id},[s("th",[s("div",{staticClass:"checkbox checkbox-primary"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedValues,expression:"checkedValues"}],attrs:{id:e.id,type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.checkedValues)?t._i(t.checkedValues,e.id)>-1:t.checkedValues},on:{change:[function(i){var s=t.checkedValues,a=i.target,r=!!a.checked;if(Array.isArray(s)){var o=e.id,n=t._i(s,o);a.checked?n<0&&(t.checkedValues=s.concat([o])):n>-1&&(t.checkedValues=s.slice(0,n).concat(s.slice(n+1)))}else t.checkedValues=r},t.checkDetails]}}),t._v(" "),s("label",{attrs:{for:e.id}})])]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(e.name))]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(e.type))]),t._v(" "),s("td",{staticStyle:{"vertical-align":"middle"}},[s("inertia-link",{staticClass:"text-danger",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"Delete info"},on:{click:function(i){return i.preventDefault(),t.deletePermission(e.id)}}},[s("i",{staticClass:"fa fa-trash"})]),t._v("\n                     "),s("a",{staticClass:"text-warning",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"Edit info"}},[s("i",{staticClass:"fa fa-pencil",attrs:{"data-toggle":"modal","data-target":"#exampleModals"},on:{click:function(i){return i.preventDefault(),t.permissionPopUp(e)}}})])],1)])})),0)]),t._v(" "),t.permissionOutput.data.length<1?s("div",{staticClass:"text-center"},[s("img",{attrs:{src:i(25),height:"150px",width:"150px",alt:"no content"}}),t._v(" "),s("h4",[t._v("No content available")])]):t._e(),t._v(" "),t.permissionOutput.data.length>0?s("span",{staticStyle:{"margin-top":"20px",float:"left"}},[t._v("From "+t._s(t.from)+" to "+t._s(t.to)+" showing: "),s("b",[t._v(t._s(t.totalResults)+" results")])]):t._e(),t._v(" "),this.totalResults>10?s("nav",{staticClass:"text-right",attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-end"},[t.currentPage>5&&t.last_page>10?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(1)}}},[t._v("First Page")])]):t._e(),t._v(" "),t.previous_page_url?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage-1)}}},[t._v("Previous")])]):s("li",{staticClass:"page-item disabled"},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0);"}},[t._v("Previous")])]),t._v(" "),t.last_page>3&&t.currentPage<=t.last_page?s("li",{staticClass:"page-item active"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage)}}},[t._v(t._s(t.currentPage))])]):t._e(),t._v(" "),t.last_page>3&&t.currentPage+1<=t.last_page?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage+1)}}},[t._v(t._s(t.currentPage+1))])]):t._e(),t._v(" "),t.last_page>3&&t.currentPage+2<=t.last_page?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage+2)}}},[t._v(t._s(t.currentPage+2))])]):t._e(),t._v(" "),t.last_page>3&&t.currentPage+3<=t.last_page?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage+3)}}},[t._v(t._s(t.currentPage+3))])]):t._e(),t._v(" "),t.last_page>3&&t.currentPage+4<=t.last_page?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage+4)}}},[t._v(t._s(t.currentPage+4))])]):t._e(),t._v(" "),t.next_page_url?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.currentPage+1)}}},[t._v("Next")])]):s("li",{staticClass:"page-item disabled"},[s("a",{staticClass:"page-link",attrs:{href:"javascript:void(0);"}},[t._v("Next")])]),t._v(" "),t.last_page>10?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(t.last_page)}}},[t._v("Last Page")])]):t._e()])]):t._e(),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"exampleModals",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.permissionEditForm.name,expression:"permissionEditForm.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.permissionEditForm.name},on:{input:function(e){e.target.composing||t.$set(t.permissionEditForm,"name",e.target.value)}}}),t._v(" "),s("span",{staticClass:"text-danger text-center mt-2"},[t._v(t._s(t.permissionEditFormError.name))])]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.permissionEditForm.type,expression:"permissionEditForm.type"}],staticClass:"form-control",attrs:{name:"type",id:"typeEdit"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.permissionEditForm,"type",e.target.multiple?i:i[0])},t.permissionEditTypeTraker]}},[s("option",{attrs:{value:""}},[t._v("Select type")]),t._v(" "),s("option",{attrs:{value:"resource"}},[t._v("Resource")]),t._v(" "),s("option",{attrs:{value:"single"}},[t._v("Single")]),t._v(" "),s("option",{attrs:{value:"custom"}},[t._v("Custom")])]),t._v(" "),s("span",{staticClass:"text-danger text-center mt-2"},[t._v(t._s(t.permissionEditFormError.type))])]),t._v(" "),s("div",{staticClass:"col-md-12",class:t.customEditChildControl},[s("div",{staticClass:"form-group",staticStyle:{display:"flex","margin-top":"5px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.permissionEditForm.custom,expression:"permissionEditForm.custom"}],staticClass:"form-control",attrs:{type:"text",placeholder:"enter child permission name"},domProps:{value:t.permissionEditForm.custom},on:{input:function(e){e.target.composing||t.$set(t.permissionEditForm,"custom",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.customEditChildAppend}},[t._v("Add")])]),t._v(" "),s("span",{staticClass:"text-danger text-center mt-2"},[t._v(t._s(t.permissionEditFormError.custom)+"\n                                ")]),t._v(" "),s("ol",t._l(t.customEditChildList,(function(e,i){return s("li",{key:i},[s("i",{staticClass:"fa fa-remove text-danger",on:{click:function(e){return t.removeEditCustom(i)}}}),t._v(" \n                                        "+t._s(e)+"\n                                    ")])})),0)])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.permissionEditSubmit(e)}}},[t._v("Save")])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabels"}},[this._v("Edit Permission")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,null,null,null);e.default=r.exports},25:function(t,e){t.exports="/images/empty.png?9b37315e3cfb40183c0203603499ea48"}}]);